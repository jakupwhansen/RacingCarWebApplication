<!DOCTYPE html>
<html>
<head>
    <script src="RacingCar.js"></script>
</head>
<body onload="startAll()">
    <br />
    <table style="width:100%; height:100%;">
        <tr>
            <td style="vertical-align:middle;">
                <button type="button" onclick="newGame()" id="startNewGameButton">Start New Game</button>
            </td>
        </tr>
        <tr>
            <td style="vertical-align:middle;">
                <canvas id="myCanvas" width="800" height="400" style="border:1px solid #d3d3d3;">
                    Your browser does not support the HTML5 canvas tag.
                </canvas>
            </td>
        </tr>
    </table>  
    <script>
        //-------------------------------------------------------------------
        //    Welcome to Genetic Algorithm with JavaScript.
        //
        //    1. You need to understand the basic of GA, first.
        //    2. You should be able to get started, by using these two following functions
        //       allready created.
        //
        //    GA_CreateNewPopulation:
        //    Create a New Population by using the GA algorithm principle,
        //
        //    GA_DriveCar_One_Time_Step:
        //    Is Driving the car, and Ind and Out is allready placed inside the
        //    function so that you can get started right away. 
        //------------------------------------------------------------------
 
        function GA_DriveCar_One_Time_Step()
        {
           //--------IN: use these 4 inputs to calculate the output.---------------------
           // speed
           // distantFront;
           // distantLeft;
           // distantRight;

           //--------Fitness. You can use the car position to calculate the fitness.------
           // car.x & car.y


            //-----Just a simple/dumb way to calculate the two output, used for stearing the car-----------------------------
            var outRotate = population[0].chromosome[0];
            var outSpeed = population[0].chromosome[1];



            //--------OUT: Change the car left/right or/and Speed--------------------------
            //Postive is Right and Negative is Left.
            rotateCar(outRotate);  
            //Positive is Faster and Negative is Slower.
            speedChange(outSpeed);  
        }
        function GA_CreateNewPopulation()
        {    
            console.log("New Population created");

            // First time we must create a Random Generation.
            // So we call this function the first time we run. The second time
            // you should run the GA algoritm, that you have to create.
            GA_CreateRandomGeneration(); 
        }
        var population = [];
        var populationNumber = 6;
        var numberOfGenesInChromosome = 4;
        function GA_CreateRandomGeneration()
        {
            // This function is just started. I have added the most important ideas like
            // an array that holde a population of chromosome. And also I added som chromosom objekt
            // that holde the chromosom and its fitness.
            population = [];
            for (var i = 0; i < populationNumber; i++)
            {
                var obj = { chromosome: [], fitness: 0 };
                for (var j = 0; j < numberOfGenesInChromosome; j++)
                {                    
                    obj.chromosome.push(getRandomNumber(2, 10)); //-5 to 5, 2 decimal.
                }
                population.push(obj);
            }
        }
        function carCrashed()
        {
            ctx.fillText("Car has crashed", 10, 20);
            ctx.fillText("Rotation change = " + population[0].chromosome[0], 10, 40);
            ctx.fillText("Speed change = "  + population[0].chromosome[1], 10, 60);
            console.log(population);
        }
        </Script>
</body>
</html>
